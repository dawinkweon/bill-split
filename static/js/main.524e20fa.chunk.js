(this["webpackJsonpbill-split"]=this["webpackJsonpbill-split"]||[]).push([[0],{21:function(t,n,e){},22:function(t,n,e){},94:function(t,n,e){"use strict";e.r(n);var c=e(0),a=e.n(c),r=e(16),o=e.n(r),i=(e(21),e(14)),s=e(9),u=e(12),l=(e(22),e(23),e(5)),j=e(8),d=e.n(j),b=e(4),m=function(t){var n=Object(c.useState)(""),e=Object(u.a)(n,2),a=e[0],r=e[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(l.Td,{className:"new-person-input",children:Object(b.jsx)(l.Input,{placeholder:"New Person",value:a,onChange:function(t){r(t.target.value)}})}),Object(b.jsx)(l.Td,{children:Object(b.jsx)(l.Button,{onClick:function(){""!==a&&(t.onNewPersonAdded(a),r(""))},children:"\u2795"})})]})},h=function(t){var n=t.item,e=t.onItemChanged,c=t.showRemaining,a=n.rowId,r=n.name,o=n.amount,i=n.splitBy,u=d.a.sortBy(i,"person.colId"),j=1-d.a.sum(i.filter((function(t){return!isNaN(t.ratio)})).map((function(t){return t.ratio}))),m=0!==j&&1!==j,h=0===j;return Object(b.jsxs)(l.Tr,{hasBackgroundDangerLight:m,hasBackgroundSuccessLight:h,children:[Object(b.jsx)(l.Td,{className:"item-name-input",children:Object(b.jsx)(l.Input,{value:n.name,placeholder:"New item",onChange:function(t){return n=t.target.value,void e(a,n,o,i);var n}})}),Object(b.jsx)(l.Td,{className:"amount-input",children:Object(b.jsx)(l.Input,{value:n.amount,type:"number",onChange:function(t){return function(t){var n=parseFloat(t);e(a,r,n,i)}(t.target.value)}})}),u.map((function(t){return Object(b.jsx)(l.Td,{className:"ratio-input",children:Object(b.jsx)(l.Input,{value:t.ratio,type:"number",onChange:function(n){return function(t,n){var c=parseFloat(n),u=[].concat(Object(s.a)(i.filter((function(n){return n.person.colId!==t.colId}))),[{person:t,ratio:c}]);e(a,r,o,u)}(t.person,n.target.value)}})},t.person.colId)})),c&&Object(b.jsx)("td",{children:0!==j?j.toFixed(2):"-"})]})},p=function(){var t=Object(c.useState)([]),n=Object(u.a)(t,2),e=n[0],a=n[1],r=Object(c.useState)([]),o=Object(u.a)(r,2),j=o[0],p=o[1],O=function(){var t=d.a.max(e.map((function(t){return t.rowId})));return{rowId:void 0!==t?t+1:0,name:"",amount:0,splitBy:j.map((function(t){return{person:t,ratio:0}}))}},f=function(t,n,c,r){if(console.log("onItemChanged with params [".concat(t,", ").concat(n,", ").concat(c,", ").concat(JSON.stringify(r),"]")),d.a.find(e,["rowId",t])){var o={rowId:t,name:n,amount:c,splitBy:r};a([].concat(Object(s.a)(e.filter((function(n){return n.rowId!==t}))),[o]))}},x=d.a.sortBy(e,"rowId"),g=function(){var t=d.a.sum(e.map((function(t){return t.amount}))),n=x.map((function(t){return t.splitBy.flatMap((function(t){return t.ratio}))})),c=d.a.zip.apply(d.a,Object(s.a)(n)).map((function(t){var n=t.map((function(t,n){return(void 0===t||isNaN(t)?0:t)*x[n].amount}));return d.a.sum(n)}));return console.log(c),{totalAmount:t,splitTotals:c}}(),T=g.totalAmount!==d.a.sum(g.splitTotals),v=j.length>0;return Object(b.jsxs)(l.Container,{className:"root",children:[Object(b.jsx)(l.Title,{children:"Split bills"}),Object(b.jsxs)(l.Table,{children:[Object(b.jsxs)(l.Thead,{children:[Object(b.jsx)(l.Td,{children:Object(b.jsx)(l.Label,{children:"Item name"})}),Object(b.jsx)(l.Td,{children:Object(b.jsx)(l.Label,{children:"Amount"})}),j.map((function(t){return Object(b.jsx)(l.Td,{children:t.name},t.colId)})),v&&Object(b.jsx)(l.Td,{children:Object(b.jsx)(l.Label,{children:"Remaining"})}),Object(b.jsx)(m,{onNewPersonAdded:function(t){var n=d.a.max(j.map((function(t){return t.colId}))),c={colId:void 0!==n?n+1:0,name:t},r=e.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{splitBy:[].concat(Object(s.a)(t.splitBy),[{person:c,ratio:0}])})}));a(r),p([].concat(Object(s.a)(j),[c]))}})]}),Object(b.jsx)(l.Tbody,{children:x.map((function(t){return Object(b.jsx)(h,{item:t,onItemChanged:f,showRemaining:v},t.rowId)}))}),Object(b.jsxs)(l.Tfoot,{children:[Object(b.jsx)(l.Tr,{className:"add-item-row",children:Object(b.jsx)(l.Button,{onClick:function(){a([].concat(Object(s.a)(e),[O()]))},children:"\u2795"})}),g.totalAmount>0&&function(t){return Object(b.jsxs)(l.Tr,{className:"summary-row",hasBackgroundDangerLight:T,hasBackgroundSuccessLight:!T,children:[Object(b.jsx)(l.Td,{children:Object(b.jsx)(l.Label,{children:"Total"})}),Object(b.jsx)(l.Td,{children:Object(b.jsxs)(l.Label,{children:["$",t.totalAmount]})}),t.splitTotals.map((function(t){return Object(b.jsx)(l.Td,{children:Object(b.jsxs)(l.Label,{children:["$",t]})})}))]})}(g)]})]})]})},O=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,95)).then((function(n){var e=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,o=n.getTTFB;e(t),c(t),a(t),r(t),o(t)}))};o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root")),O()}},[[94,1,2]]]);
//# sourceMappingURL=main.524e20fa.chunk.js.map